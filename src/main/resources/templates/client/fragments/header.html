
<header xmlns:th="http://www.thymeleaf.org" th:fragment="header"
	class="site-header sticky-top">
	<div
		class="container-ivy d-flex align-items-center justify-content-between position-relative">

		<nav class="d-none d-lg-flex">

			<div class="ivy-menu-item">
				<a th:href="@{/danh-muc/nu}" class="ivy-nav-link">NỮ</a>

				<div class="ivy-mega-menu">
					<div class="container-ivy">
						<div class="ivy-grid-wrapper">

							<div class="ivy-col-special">
								<a th:href="@{/danh-muc/hang-nu-moi-ve}"
									class="d-block font-weight-bold mb-3 text-danger"
									style="font-size: 14px;">NEW ARRIVAL</a> <a
									th:href="@{/danh-muc/nu}" class="d-block font-weight-bold mb-3"
									style="font-size: 14px; color: #333;">ALL ITEMS</a> <a href="#"
									class="d-block font-weight-bold text-danger"
									style="font-size: 14px;">HOT ITEMS - SALE 50%</a>
							</div>

							<div class="ivy-col-categories">
								<div class="ivy-sub-cat-item"
									th:each="parent : ${womenCategories}">

									<a th:href="@{'/danh-muc/' + ${parent.slug}}"
										class="ivy-cat-title" th:text="${parent.name}">ÁO</a>

									<div th:each="child : ${parent.children}">
										<a th:href="@{'/danh-muc/' + ${child.slug}}"
											class="d-block mb-2 text-muted"
											style="font-size: 13px; text-decoration: none; transition: 0.3s;"
											onmouseover="this.style.color='#000'"
											onmouseout="this.style.color='#6c757d'"
											th:text="${child.name}">Áo sơ mi</a>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>

			<div class="ivy-menu-item">
				<a th:href="@{/danh-muc/nam}" class="ivy-nav-link">NAM</a>

				<div class="ivy-mega-menu">
					<div class="container-ivy">
						<div class="ivy-grid-wrapper">

							<div class="ivy-col-special">
								<a th:href="@{/danh-muc/hang-nam-moi-ve}"
									class="d-block font-weight-bold mb-3 text-danger"
									style="font-size: 14px;">NEW ARRIVAL</a> <a
									th:href="@{/danh-muc/nam}"
									class="d-block font-weight-bold mb-3"
									style="font-size: 14px; color: #333;">ALL ITEMS</a> <a href="#"
									class="d-block font-weight-bold text-danger"
									style="font-size: 14px;">HOT ITEMS - SALE 50%</a>
							</div>

							<div class="ivy-col-categories">
								<div class="ivy-sub-cat-item"
									th:each="parent : ${menCategories}">
									<a th:href="@{'/danh-muc/' + ${parent.slug}}"
										class="ivy-cat-title" th:text="${parent.name}">ÁO</a>
									<div th:each="child : ${parent.children}">
										<a th:href="@{'/danh-muc/' + ${child.slug}}"
											class="d-block mb-2 text-muted"
											style="font-size: 13px; text-decoration: none; transition: 0.3s;"
											onmouseover="this.style.color='#000'"
											onmouseout="this.style.color='#6c757d'"
											th:text="${child.name}">Áo thun</a>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>

			<div class="ivy-menu-item">
				<a th:href="@{/sale}" class="ivy-nav-link nav-highlight">BIG
					SALE THÁNG 12</a>
			</div>
			<div class="ivy-menu-item">
				<a th:href="@{/collection}" class="ivy-nav-link">BỘ SƯU TẬP</a>
			</div>
			<div class="ivy-menu-item">
				<a th:href="@{/about}" class="ivy-nav-link">VỀ CHÚNG TÔI</a>
			</div>

		</nav>

		<button class="btn d-lg-none" type="button">
			<i class="fas fa-bars"></i>
		</button>

		<a th:href="@{/}" class="ivy-logo text-center"> IVY <span>moda</span>
		</a>

		<div class="d-flex align-items-center">

			<form action="#" class="d-none d-md-flex ivy-search-box">
				<input type="text" class="ivy-search-input"
					placeholder="TÌM KIẾM SẢN PHẨM">
				<button type="submit" class="btn ivy-search-btn">
					<i class="fas fa-search"></i>
				</button>
			</form>

			<a href="#" class="ivy-icon-btn d-none d-sm-block"> <i
				class="fas fa-headset"></i>
			</a> <a sec:authorize="!isAuthenticated()" th:href="@{/login}"
				class="ivy-icon-btn"> <i class="far fa-user"></i>
			</a>

			<div sec:authorize="isAuthenticated()" class="ivy-icon-btn user-dropdown-container">
    
    <a href="javascript:void(0)" class="text-dark" onclick="toggleUserMenu(event)">
        <i class="far fa-user"></i>
    </a>

    <div class="user-dropdown-menu" id="userDropdown" style="display: none;">
        
        <div class="user-info">
            Xin chào, <b sec:authentication="name">User</b>
        </div>
        
        <ul class="user-menu-list">
            <li sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/admin}" class="text-danger font-weight-bold">
                    <i class="fas fa-cogs mr-2"></i> Trang quản trị
                </a>
            </li>

            <li>
                <a th:href="@{/account/profile}">
                    <i class="far fa-id-card mr-2"></i> Thông tin tài khoản
                </a>
            </li>
            <li>
                <a th:href="@{/account/orders}">
                    <i class="fas fa-history mr-2"></i> Quản lý đơn hàng
                </a>
            </li>
            
            <li class="border-top pt-2 mt-2">
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="btn-logout-link">
                        <i class="fas fa-sign-out-alt mr-2"></i> Đăng xuất
                    </button>
                </form>
            </li>
        </ul>
    </div>
</div>
			<div class="header-cart-icon" onclick="openMiniCart()">
				<i class="fas fa-shopping-bag"
					style="font-size: 24px; cursor: pointer;"></i> <span
					class="cart-badge" th:if="${globalCartCount > 0}"
					th:text="${globalCartCount}">0</span>
			</div>
		</div>

	</div>
</header>